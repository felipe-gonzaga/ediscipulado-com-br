<div class="row">
  <div class="col-lg-12">
      <nb-card >
          <nb-card-header><h4>Emitir Relatório de Novos Decididos</h4></nb-card-header>
          <nb-card-body [nbSpinner]="loading" nbSpinnerStatus="info" nbSpinnerSize="giant">
            <form autocomplete="off" (ngSubmit)="emitirRelatorioNovosConvertidos()">

              <div class="form-group">
                <label for="codigoIgreja" class="label">Igreja</label>
                <div>
                  <nb-select fullWidth name="codigoIgreja" [selected]="filtro.codigoIgreja" [(ngModel)]="filtro.codigoIgreja" (selectedChange)="atualizarLocalConversaoEventoConversao()" >
                    <nb-option  *ngFor="let igreja of igrejas" [value]="igreja.value"> {{ igreja.name }}</nb-option>
                  </nb-select>
                </div>
              </div>

              <div class="form-group">
                <label for="nome" class="label">Nome</label>
                <input type="text" nbInput fullWidth id="nome" name="nome" placeholder="Nome" [(ngModel)]="filtro.nome">
              </div>

              <div class="form-group">
                <label for="dataConversaoDe" class="label">Período Conversão</label>
                <div class="full-name-inputs">
                    <input nbInput placeholder="Data Inicial" fullWidth [nbDatepicker]="dataConversaoDe" name="dataConversaoDe" [(ngModel)]="filtro.dataConversaoDe">
                    <nb-datepicker format="dd.MM.yyyy" #dataConversaoDe></nb-datepicker>
                    <label></label>
                    <input nbInput placeholder="Data Final" fullWidth [nbDatepicker]="dataConversaoAte" name="dataConversaoAte" [(ngModel)]="filtro.dataConversaoAte">
                    <nb-datepicker format="dd.MM.yyyy" #dataConversaoAte></nb-datepicker>
                </div>
              </div>

              <div class="form-group">

                    <label for="localConversao" class="label">Local de Conversão</label>
                    <nb-select fullWidth name="localConversao" [selected]="filtro.localConversao"  placeholder="Selecione" [(ngModel)]="filtro.localConversao"  >
                      <nb-option value="">Todas</nb-option>
                      <nb-option *ngFor="let local of locais" [value]="local.value"> {{ local.name }}</nb-option>
                    </nb-select>

              </div>
              <div class="form-group">

                    <label for="eventoConversao" class="label">Evento de Conversão</label>
                    <nb-select fullWidth name="eventoConversao" [selected]="filtro.eventoConversao"  placeholder="Selecione" [(ngModel)]="filtro.eventoConversao"  >
                      <nb-option value="">Todas</nb-option>
                      <nb-option *ngFor="let evento of eventos" [value]="evento.value"> {{ evento.name }}</nb-option>
                    </nb-select>

              </div>

              <div class="col-lg-12">
                <button status="primary" type="submit" nbButton [disabled]="!auth.temPermissao('ROLE_CONSULTAR_DISCIPULANDO')" >Emitir Relatório <nb-icon icon="file-outline"></nb-icon></button>
              </div>
            </form>
          </nb-card-body>
        </nb-card>

    </div>
</div>
