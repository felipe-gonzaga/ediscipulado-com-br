<div class="row">
  <div class="col-lg-12">
    <form autocomplete="off" #f="ngForm" (ngSubmit)="salvar()">
      <div class="col-lg-12" [nbSpinner]="loading" nbSpinnerStatus="info" nbSpinnerSize="giant">
        <nb-card>
          <nb-card-header><h4>Permissão Usuário</h4></nb-card-header>
            <nb-card-body>
              <div class="form-group">
                <label>Nome</label>
                <input type="text" nbInput fullWidth name="nome" [(ngModel)]="usuario.pessoa.nome" disabled>
              </div>

              <div class="form-group">
                <label>Email</label>
                <input type="text" nbInput fullWidth name="email" [(ngModel)]="usuario.email" disabled>
              </div>
            </nb-card-body>
          </nb-card>

        <nb-card>
          <nb-card-header><h6>Permissões</h6></nb-card-header>
          <nb-card-body>
            <div class="row show-grid">
              <div class="col-md-12">
              <form #frmPermissoesTabela="ngForm">
                <p-table [value]="permissoes" [responsive]="true">
                  <ng-template pTemplate="header" >
                    <tr>
                      <th class="col-permissoes-codigo-header">Código</th>
                      <th class="col-permissoes-descricao-header">Descrição</th>
                      <th class="col-acoes"></th>
                    </tr>
                  </ng-template>
                  <ng-template pTemplate="body" let-perm >
                    <tr>
                      <td class="col-permissoes-codigo">{{ perm.codigo }}</td>
                      <td class="col-permissoes-descricao">{{ perm.descricao }}</td>
                      <td class="col-acoes">
                        <p-checkbox name="group1" [value]="perm.codigo" [(ngModel)]="permissoesUsuario" [inputId]="perm.codigo"></p-checkbox>
                      </td>
                    </tr>
                  </ng-template>
                  <ng-template pTemplate="emptyMessage">
                    <tr>
                      <td  colspan="4">
                        Nenhuma permissão atribuida ao usuário.
                      </td>
                    </tr>
                  </ng-template>
                </p-table>
              </form>
            </div>
          </div>
        </nb-card-body>
      </nb-card>

        <div class="form-group">
          <button nbButton type="submit" status="primary" [disabled]="f.invalid">Salvar</button>
          <a routerLink="/pages/usuario-permissoes" >Voltar para a pesquisa</a>
        </div>

      </div>
    </form>
  </div>
</div>
